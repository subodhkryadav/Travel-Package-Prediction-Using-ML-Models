<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Travel Package Predictor</title>
<link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="page">
<header class="hero">
<h1>Travel Package Purchase Predictor</h1>
<p class="sub">Enter customer details ‚Äî predictions from multiple models shown together.</p>
</header>

<main class="layout">
<form method="POST" class="form-card">
<h2>Customer Input</h2>

{% if errors %}
<div class="alerts">
{% for e in errors %}
<div class="alert">{{ e }}</div>
{% endfor %}
</div>
{% endif %}

<div class="grid">
{% set label_overrides = {
    "TypeofContact_SelfEnquiry": "Type of Contact (Self Enquiry)",
    "Occupation_LargeBusiness": "Occupation (Large Business)",
    "Occupation_SmallBusiness": "Occupation (Small Business)",
    "PreferredPropertyStar": "Preferred Property Star",
    "NumberOfPersonVisiting": "Number of Persons Visiting",
    "NumberOfChildrenVisiting": "Number of Children Visiting",
    "MonthlyIncome": "Monthly Income",
    "PitchSatisfactionScore": "Pitch Satisfaction Score"
} %}

{% set ranges = {
    "Age": {"min":1,"max":100,"step":1,"ph":"1-100"},
    "CityTier": {"min":1,"max":3,"step":1,"ph":"1-3"},
    "DurationOfPitch":{"min":1,"max":120,"step":0.5,"ph":"1-120"},
    "NumberOfPersonVisiting":{"min":1,"max":10,"step":1,"ph":"1-10"},
    "NumberOfFollowups":{"min":0,"max":20,"step":1,"ph":"0-20"},
    "ProductPitched":{"min":1,"max":10,"step":1,"ph":"1-10"},
    "PreferredPropertyStar":{"min":1,"max":5,"step":1,"ph":"1-5"},
    "NumberOfTrips":{"min":0,"max":50,"step":1,"ph":"0-50"},
    "Passport":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "PitchSatisfactionScore":{"min":1,"max":5,"step":1,"ph":"1-5"},
    "OwnCar":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "NumberOfChildrenVisiting":{"min":0,"max":10,"step":1,"ph":"0-10"},
    "Designation":{"min":0,"max":20,"step":1,"ph":"0-20"},
    "MonthlyIncome":{"min":0,"max":10000000,"step":0.01,"ph":"e.g. 25000"},
    "TypeofContact_SelfEnquiry":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "Occupation_LargeBusiness":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "Occupation_Salaried":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "Occupation_SmallBusiness":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "Gender_Male":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "MaritalStatus_Married":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "MaritalStatus_Single":{"min":0,"max":1,"step":1,"ph":"0 or 1"},
    "MaritalStatus_Unmarried":{"min":0,"max":1,"step":1,"ph":"0 or 1"}
} %}

{% for f in user_input.keys() %}
{% set label = label_overrides[f] if f in label_overrides else f.replace('_',' ') %}
{% set attr = ranges[f] if f in ranges else {"min":0,"max":10000000,"step":1,"ph":""} %}
<label class="field">
<span class="field-label">{{ label }}</span>
<input type="number" name="{{ f }}" min="{{ attr.min }}" max="{{ attr.max }}" step="{{ attr.step }}" placeholder="{{ attr.ph }}" value="{{ user_input[f] }}" required>
</label>
{% endfor %}
</div>

<div class="form-actions">
<button class="btn primary" type="submit">Predict</button>
<a class="btn muted" href="/">Reset</a>
</div>
</form>

<section class="result-card">
<h2>Model Predictions</h2>
{% if result %}
<div class="results-grid">
{% for model, info in result.items() %}
<div class="model-box {% if best_model == model %}best{% endif %}">
<div class="model-row">
<div class="model-name">{{ model }}</div>
<div class="model-badge {% if info.prediction is defined and info.prediction==1 %}yes{% else %}no{% endif %}">
{% if info.prediction is defined %} {% if info.prediction==1 %}YES{% else %}NO{% endif %} {% else %}-{% endif %}
</div>
</div>

{% if info.probability is defined %}
<div class="prob-wrap">
<div class="prob-label">Confidence</div>
<div class="prob-bar">
<div class="prob-fill" style="width: {{ info.probability*100 }}%"></div>
</div>
<div class="prob-value">{{ (info.probability*100)|round(2) }}%</div>
</div>
{% elif info.error is defined %}
<div class="error-text">{{ info.error }}</div>
{% endif %}
</div>
{% endfor %}
</div>

<div class="best-banner">
üèÜ Best model: <strong>{{ best_model if best_model else '-' }}</strong>
</div>
{% else %}
<div class="muted">Fill form and click Predict to see results</div>
{% endif %}
</section>
</main>

<footer class="site-footer">
<div>Built by <strong>Subodh Kumar Yadav</strong> ‚Ä¢ <a href="https://github.com/subodhkryadav" target="_blank">GitHub</a> ‚Ä¢ <a href="https://www.linkedin.com/in/subodh-kumar-yadav-522828293" target="_blank">LinkedIn</a></div>
</footer>
</div>
</body>
</html>
